# Edit next two values:
#export APP=de10-IMU
#export MAIN=Flight_controller
export APP=mark
export MAIN=main

export REPOS=~/repos/PREDICT/c_apps
export ADDRESS=~/t-crest/patmos

# Let everything else run:
white=`tput setab 7`
green=`tput setaf 2`
reset=`tput sgr0`
echo "${green}======== Generating C app in Patmos directory... ========${reset}"
echo "APP = "$APP
rm -rf $ADDRESS/c/apps/$APP
rm -rf $ADDRESS/tmp/$APP.elf
mkdir $ADDRESS/c/apps/$APP
cd $REPOS
cp $APP/* $ADDRESS/c/apps/$APP
echo "Copy process done."
echo "${green}======== Compiling C app in Patmos ========${reset}"
cd $ADDRESS/c/apps/$APP
make
cd $ADDRESS
export BOARD=de10-nano
make app APP=$APP comp
echo "${green}======== Download code on board ========${reset}"
make app APP=$APP download || make app APP=$APP download COM_PORT=/dev/ttyUSB1
