# Edit next two values:
#export APP=de10-IMU
#export MAIN=check_gps
export APP=drone-motor
export MAIN=motor_test
#export APP=de10-nano
#export MAIN=hello_MPU6050

export REPOS=~/repos/PREDICT/c_apps
export ADDRESS=~/t-crest/patmos

# Let everything else run:
white=`tput setab 7`
green=`tput setaf 2`
reset=`tput sgr0`
echo "${green}======== Generating C app in Patmos directory... ========${reset}"
echo "APP = "$APP
rm -rf $ADDRESS/c/apps/$APP
rm -rf $ADDRESS/tmp/$APP.elf
mkdir $ADDRESS/c/apps/$APP
cd $REPOS
cp $APP/* $ADDRESS/c/apps/$APP
echo "Copy process done."
echo "${green}======== Compiling C app in Patmos ========${reset}"
cd $ADDRESS/c/apps/$APP
#make all
patmos-clang -o $ADDRESS/tmp/$APP.elf $MAIN.c 
cd $ADDRESS
export BOARD=de10-nano
make app APP=$APP comp
echo "${green}======== Download code on board ========${reset}"
make app APP=$APP download
